{"ast":null,"code":"// import { useEffect } from \"react\";\n\n// const initialState = {\n//     cartItems: [],\n//     cartCounter: 0,\n//     totalPrice: 0,\n//     deliverCharges: 50,\n//     taxes: 0,\n//     grandTotal: 0,\n\n// };\n\nconst savedCart = localStorage.getItem('cartState');\nconst initialState = savedCart ? JSON.parse(savedCart) : {\n  cartItems: [],\n  cartCounter: 0,\n  totalPrice: 0,\n  deliverCharges: 50,\n  taxes: 0,\n  grandTotal: 0\n};\nuseEffect(() => {\n  localStorage.setItem('cartState', JSON.stringify(state));\n}, [state]);\nconst cartReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'ADD_TO_CART':\n      const exisitingItemIndex = state.cartItems.findIndex(item => item.id === action.payload.id);\n      if (exisitingItemIndex !== -1) {\n        const updatedCartItems = state.cartItems.map((item, index) => {\n          if (index === exisitingItemIndex) {\n            return {\n              ...item,\n              quantity: item.quantity + 1,\n              total_item_price: (item.quantity + 1) * item.price\n            };\n          }\n          return item;\n        });\n        return {\n          ...state,\n          cartItems: updatedCartItems,\n          cartCounter: state.cartCounter + 1,\n          totalPrice: state.totalPrice + action.payload.price,\n          taxes: (state.totalPrice + action.payload.price) * 0.18,\n          grandTotal: state.totalPrice + state.taxes + action.payload.price\n        };\n      } else {\n        return {\n          ...state,\n          cartItems: [...state.cartItems, {\n            ...action.payload,\n            quantity: 1,\n            total_item_price: action.payload.price\n          }],\n          cartCounter: state.cartCounter + 1,\n          totalPrice: state.totalPrice + action.payload.price,\n          taxes: (state.totalPrice + action.payload.price) * 0.18,\n          grandTotal: state.totalPrice + state.taxes + action.payload.price\n        };\n      }\n    case 'REMOVE_FROM_CART':\n      const updatedCartItems = state.cartItems.filter(item => item.id !== action.payload.id);\n      const removedItem = state.cartItems.find(item => item.id === action.payload);\n      return {\n        ...state,\n        cartItems: updatedCartItems,\n        cartCounter: state.cartCounter - removedItem.quantity,\n        totalPrice: state.totalPrice - removedItem.price * removedItem.quantity,\n        taxes: (state.totalPrice + action.payload.price) * 0.18,\n        grandTotal: state.totalPrice + state.taxes + action.payload.price\n      };\n    default:\n      return state;\n    case 'INCREMENT_CART_COUNTER':\n      {\n        const updatedCartItems = state.cartItems.map(item => {\n          if (item.id === action.payload) {\n            const newQty = item.quantity + 1;\n            return {\n              ...item,\n              quantity: newQty,\n              total_item_price: newQty * item.price\n            };\n          }\n          return item;\n        });\n        const newTotalPrice = updatedCartItems.reduce((acc, item) => acc + item.total_item_price, 0);\n        const newTaxes = newTotalPrice * 0.18;\n        const newGrandTotal = newTotalPrice + newTaxes + state.deliverCharges;\n        return {\n          ...state,\n          cartItems: updatedCartItems,\n          totalPrice: newTotalPrice,\n          taxes: newTaxes,\n          grandTotal: newGrandTotal\n        };\n      }\n    case 'DECREMENT_CART_COUNTER':\n      {\n        const updatedCartItems = state.cartItems.map(item => {\n          if (item.id === action.payload && item.quantity > 1) {\n            const newQty = item.quantity - 1;\n            return {\n              ...item,\n              quantity: newQty,\n              total_item_price: newQty * item.price\n            };\n          }\n          return item;\n        });\n        const newTotalPrice = updatedCartItems.reduce((acc, item) => acc + item.total_item_price, 0);\n        const newTaxes = newTotalPrice * 0.18;\n        const newGrandTotal = newTotalPrice + newTaxes + state.deliverCharges;\n        return {\n          ...state,\n          cartItems: updatedCartItems,\n          totalPrice: newTotalPrice,\n          taxes: newTaxes,\n          grandTotal: newGrandTotal\n        };\n      }\n  }\n};\nexport default cartReducer;","map":{"version":3,"names":["savedCart","localStorage","getItem","initialState","JSON","parse","cartItems","cartCounter","totalPrice","deliverCharges","taxes","grandTotal","useEffect","setItem","stringify","state","cartReducer","action","type","exisitingItemIndex","findIndex","item","id","payload","updatedCartItems","map","index","quantity","total_item_price","price","filter","removedItem","find","newQty","newTotalPrice","reduce","acc","newTaxes","newGrandTotal"],"sources":["D:/Sachin/Project/E-Commerce Project/frontend/src/reducers/cartReducer.js"],"sourcesContent":["// import { useEffect } from \"react\";\r\n\r\n// const initialState = {\r\n//     cartItems: [],\r\n//     cartCounter: 0,\r\n//     totalPrice: 0,\r\n//     deliverCharges: 50,\r\n//     taxes: 0,\r\n//     grandTotal: 0,\r\n\r\n// };\r\n\r\nconst savedCart = localStorage.getItem('cartState');\r\n\r\nconst initialState = savedCart\r\n  ? JSON.parse(savedCart)\r\n  : {\r\n      cartItems: [],\r\n      cartCounter: 0,\r\n      totalPrice: 0,\r\n      deliverCharges: 50,\r\n      taxes: 0,\r\n      grandTotal: 0,\r\n    };\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('cartState', JSON.stringify(state));\r\n      }, [state]);\r\n      \r\n\r\n\r\nconst cartReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'ADD_TO_CART':\r\n            const exisitingItemIndex = state.cartItems.findIndex(item => item.id === action.payload.id);\r\n            if (exisitingItemIndex !== -1) {\r\n                const updatedCartItems = state.cartItems.map((item, index) => {\r\n                    if (index === exisitingItemIndex) {\r\n                        return {\r\n                            ...item, quantity: item.quantity + 1, total_item_price: (item.quantity + 1) * item.price\r\n                        };\r\n                    }\r\n                    return item;\r\n                });\r\n\r\n                return {\r\n                    ...state,\r\n                    cartItems: updatedCartItems,\r\n                    cartCounter: state.cartCounter + 1,\r\n                    totalPrice: state.totalPrice + action.payload.price,\r\n                    taxes: (state.totalPrice + action.payload.price) * 0.18,\r\n                    grandTotal: state.totalPrice + state.taxes + action.payload.price\r\n\r\n                };\r\n\r\n            } else {\r\n                return {\r\n                    ...state,\r\n                    cartItems: [...state.cartItems, { ...action.payload, quantity: 1, total_item_price: action.payload.price }],\r\n                    cartCounter: state.cartCounter + 1,\r\n                    totalPrice: state.totalPrice + action.payload.price,\r\n                    taxes: (state.totalPrice + action.payload.price) * 0.18,\r\n                    grandTotal: state.totalPrice + state.taxes + action.payload.price\r\n                };\r\n            }\r\n\r\n        case 'REMOVE_FROM_CART':\r\n            const updatedCartItems = state.cartItems.filter(item => item.id !== action.payload.id);\r\n            const removedItem = state.cartItems.find(item => item.id === action.payload);\r\n\r\n            return {\r\n\r\n                ...state,\r\n                cartItems: updatedCartItems,\r\n                cartCounter: state.cartCounter - removedItem.quantity,\r\n                totalPrice: state.totalPrice - (removedItem.price * removedItem.quantity),\r\n                taxes: (state.totalPrice + action.payload.price) * 0.18,\r\n                grandTotal: state.totalPrice + state.taxes + action.payload.price\r\n            };\r\n\r\n        default:\r\n            return state;\r\n\r\n        case 'INCREMENT_CART_COUNTER': {\r\n            const updatedCartItems = state.cartItems.map(item => {\r\n                if (item.id === action.payload) {\r\n                    const newQty = item.quantity + 1;\r\n                    return {\r\n                        ...item,\r\n                        quantity: newQty,\r\n                        total_item_price: newQty * item.price\r\n                    };\r\n                }\r\n                return item;\r\n            });\r\n            const newTotalPrice = updatedCartItems.reduce((acc, item) => acc + item.total_item_price, 0);\r\n            const newTaxes = newTotalPrice * 0.18;\r\n            const newGrandTotal = newTotalPrice + newTaxes + state.deliverCharges;\r\n\r\n            return {\r\n                ...state,\r\n                cartItems: updatedCartItems,\r\n                totalPrice: newTotalPrice,\r\n                taxes: newTaxes,\r\n                grandTotal: newGrandTotal,\r\n            };\r\n        }\r\n\r\n        case 'DECREMENT_CART_COUNTER': {\r\n            const updatedCartItems = state.cartItems.map(item => {\r\n              if (item.id === action.payload && item.quantity > 1) {\r\n                const newQty = item.quantity - 1;\r\n                return {\r\n                  ...item,\r\n                  quantity: newQty,\r\n                  total_item_price: newQty * item.price\r\n                };\r\n              }\r\n              return item;\r\n            });\r\n          \r\n            const newTotalPrice = updatedCartItems.reduce((acc, item) => acc + item.total_item_price, 0);\r\n            const newTaxes = newTotalPrice * 0.18;\r\n            const newGrandTotal = newTotalPrice + newTaxes + state.deliverCharges;\r\n          \r\n            return {\r\n              ...state,\r\n              cartItems: updatedCartItems,\r\n              totalPrice: newTotalPrice,\r\n              taxes: newTaxes,\r\n              grandTotal: newGrandTotal,\r\n            };\r\n          }\r\n          \r\n          \r\n    }\r\n    \r\n    \r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default cartReducer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}