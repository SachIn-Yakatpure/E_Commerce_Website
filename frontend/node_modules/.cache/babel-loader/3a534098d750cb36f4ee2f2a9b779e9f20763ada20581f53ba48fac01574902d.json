{"ast":null,"code":"export const saveUserCart = () => async (dispatch, getState) => {\n  const {\n    cart: {\n      cartItems\n    },\n    userLogin: {\n      userInfo\n    }\n  } = getState();\n  console.log(\"🛒 saveUserCart triggered\", {\n    userInfo,\n    cartItems\n  });\n  if (!userInfo || userInfo.success === false) {\n    console.warn(\"🚫 Aborting saveUserCart: user not logged in or login failed.\");\n    return;\n  }\n  const invalidItems = cartItems.filter(item => !item._id || typeof item.qty !== 'number');\n  if (invalidItems.length > 0) {\n    console.warn('⚠️ Found invalid cart items, skipping:', invalidItems);\n  }\n  const transformedCart = cartItems.filter(item => item._id && typeof item.qty === 'number').map(item => ({\n    productId: item._id,\n    qty: item.qty <= 0 ? 1 : item.qty\n  }));\n  if (transformedCart.length === 0) {\n    console.warn(\"🚫 No valid cart items to save.\");\n    return;\n  }\n  try {\n    await axios.post(\"http://localhost:7000/api/cart/save\", {\n      cartItems: transformedCart\n    }, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    console.log(\"✅ Cart saved:\", transformedCart);\n  } catch (error) {\n    console.error(\"❌ Error saving cart to backend:\", error);\n  }\n};","map":{"version":3,"names":["saveUserCart","dispatch","getState","cart","cartItems","userLogin","userInfo","console","log","success","warn","invalidItems","filter","item","_id","qty","length","transformedCart","map","productId","axios","post","headers","Authorization","token","error"],"sources":["D:/Sachin/Project/E-Commerce Project/frontend/src/actions/cartActions.js"],"sourcesContent":["export const saveUserCart = () => async (dispatch, getState) => {\r\n  const {\r\n    cart: { cartItems },\r\n    userLogin: { userInfo }\r\n  } = getState();\r\n\r\n  console.log(\"🛒 saveUserCart triggered\", { userInfo, cartItems });\r\n\r\n  if (!userInfo || userInfo.success === false) {\r\n    console.warn(\"🚫 Aborting saveUserCart: user not logged in or login failed.\");\r\n    return;\r\n  }\r\n\r\n  const invalidItems = cartItems.filter(item => !item._id || typeof item.qty !== 'number');\r\n  if (invalidItems.length > 0) {\r\n    console.warn('⚠️ Found invalid cart items, skipping:', invalidItems);\r\n  }\r\n\r\n  const transformedCart = cartItems\r\n    .filter(item => item._id && typeof item.qty === 'number')\r\n    .map(item => ({\r\n      productId: item._id,\r\n      qty: item.qty <= 0 ? 1 : item.qty,\r\n    }));\r\n\r\n  if (transformedCart.length === 0) {\r\n    console.warn(\"🚫 No valid cart items to save.\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    await axios.post(\r\n      \"http://localhost:7000/api/cart/save\",\r\n      { cartItems: transformedCart },\r\n      {\r\n        headers: { Authorization: `Bearer ${userInfo.token}` },\r\n      }\r\n    );\r\n\r\n    console.log(\"✅ Cart saved:\", transformedCart);\r\n  } catch (error) {\r\n    console.error(\"❌ Error saving cart to backend:\", error);\r\n  }\r\n};\r\n"],"mappings":"AAAA,OAAO,MAAMA,YAAY,GAAGA,CAAA,KAAM,OAAOC,QAAQ,EAAEC,QAAQ,KAAK;EAC9D,MAAM;IACJC,IAAI,EAAE;MAAEC;IAAU,CAAC;IACnBC,SAAS,EAAE;MAAEC;IAAS;EACxB,CAAC,GAAGJ,QAAQ,CAAC,CAAC;EAEdK,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE;IAAEF,QAAQ;IAAEF;EAAU,CAAC,CAAC;EAEjE,IAAI,CAACE,QAAQ,IAAIA,QAAQ,CAACG,OAAO,KAAK,KAAK,EAAE;IAC3CF,OAAO,CAACG,IAAI,CAAC,+DAA+D,CAAC;IAC7E;EACF;EAEA,MAAMC,YAAY,GAAGP,SAAS,CAACQ,MAAM,CAACC,IAAI,IAAI,CAACA,IAAI,CAACC,GAAG,IAAI,OAAOD,IAAI,CAACE,GAAG,KAAK,QAAQ,CAAC;EACxF,IAAIJ,YAAY,CAACK,MAAM,GAAG,CAAC,EAAE;IAC3BT,OAAO,CAACG,IAAI,CAAC,wCAAwC,EAAEC,YAAY,CAAC;EACtE;EAEA,MAAMM,eAAe,GAAGb,SAAS,CAC9BQ,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,GAAG,IAAI,OAAOD,IAAI,CAACE,GAAG,KAAK,QAAQ,CAAC,CACxDG,GAAG,CAACL,IAAI,KAAK;IACZM,SAAS,EAAEN,IAAI,CAACC,GAAG;IACnBC,GAAG,EAAEF,IAAI,CAACE,GAAG,IAAI,CAAC,GAAG,CAAC,GAAGF,IAAI,CAACE;EAChC,CAAC,CAAC,CAAC;EAEL,IAAIE,eAAe,CAACD,MAAM,KAAK,CAAC,EAAE;IAChCT,OAAO,CAACG,IAAI,CAAC,iCAAiC,CAAC;IAC/C;EACF;EAEA,IAAI;IACF,MAAMU,KAAK,CAACC,IAAI,CACd,qCAAqC,EACrC;MAAEjB,SAAS,EAAEa;IAAgB,CAAC,EAC9B;MACEK,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUjB,QAAQ,CAACkB,KAAK;MAAG;IACvD,CACF,CAAC;IAEDjB,OAAO,CAACC,GAAG,CAAC,eAAe,EAAES,eAAe,CAAC;EAC/C,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACdlB,OAAO,CAACkB,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;EACzD;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}