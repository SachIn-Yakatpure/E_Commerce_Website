{"ast":null,"code":"const savedCartState = JSON.parse(localStorage.getItem('cartState'));\nconst initialState = savedCartState || {\n  cartItems: [],\n  cartCounter: 0,\n  totalPrice: 0,\n  taxes: 0,\n  deliverCharges: 50,\n  grandTotal: 0\n};\nconst cartReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'ADD_TO_CART':\n      {\n        const existIndex = state.cartItems.findIndex(item => item.id === action.payload.id);\n        let updatedState;\n        if (existIndex !== -1) {\n          const updatedCartItems = state.cartItems.map((item, index) => {\n            if (index === existIndex) {\n              const newQuantity = item.quantity + 1;\n              return {\n                ...item,\n                quantity: newQuantity,\n                total_item_price: newQuantity * item.price\n              };\n            }\n            return item;\n          });\n          updatedState = {\n            ...state,\n            cartItems: updatedCartItems,\n            cartCounter: state.cartCounter + 1,\n            totalPrice: updatedCartItems.reduce((acc, item) => acc + item.total_item_price, 0),\n            taxes: updatedState.totalPrice * 0.18,\n            grandTotal: updatedState.totalPrice + updatedState.taxes + state.deliverCharges\n          };\n        } else {\n          updatedState = {\n            ...state,\n            cartItems: [...state.cartItems, {\n              ...action.payload,\n              quantity: 1,\n              total_item_price: action.payload.price\n            }],\n            cartCounter: state.cartCounter + 1,\n            totalPrice: state.totalPrice + action.payload.price,\n            taxes: (state.totalPrice + action.payload.price) * 0.18,\n            grandTotal: state.totalPrice + action.payload.price + state.taxes + state.deliverCharges\n          };\n        }\n        localStorage.setItem('cartState', JSON.stringify(updatedState));\n        return updatedState;\n      }\n    case 'INCREMENT_CART_COUNTER':\n      {\n        const updatedCartItems = state.cartItems.map(item => {\n          if (item.id === action.payload) {\n            const newQty = item.quantity + 1;\n            return {\n              ...item,\n              quantity: newQty,\n              total_item_price: newQty * item.price\n            };\n          }\n          return item;\n        });\n        const newTotalPrice = updatedCartItems.reduce((acc, item) => acc + item.total_item_price, 0);\n        const newTaxes = newTotalPrice * 0.18;\n        const newGrandTotal = newTotalPrice + newTaxes + state.deliverCharges;\n        const updatedState = {\n          ...state,\n          cartItems: updatedCartItems,\n          totalPrice: newTotalPrice,\n          taxes: newTaxes,\n          grandTotal: newGrandTotal\n        };\n        localStorage.setItem('cartState', JSON.stringify(updatedState));\n        return updatedState;\n      }\n    case 'DECREMENT_CART_COUNTER':\n      {\n        const updatedCartItems = state.cartItems.map(item => {\n          if (item.id === action.payload && item.quantity > 1) {\n            const newQty = item.quantity - 1;\n            return {\n              ...item,\n              quantity: newQty,\n              total_item_price: newQty * item.price\n            };\n          }\n          return item;\n        });\n        const newTotalPrice = updatedCartItems.reduce((acc, item) => acc + item.total_item_price, 0);\n        const newTaxes = newTotalPrice * 0.18;\n        const newGrandTotal = newTotalPrice + newTaxes + state.deliverCharges;\n        const updatedState = {\n          ...state,\n          cartItems: updatedCartItems,\n          totalPrice: newTotalPrice,\n          taxes: newTaxes,\n          grandTotal: newGrandTotal\n        };\n        localStorage.setItem('cartState', JSON.stringify(updatedState));\n        return updatedState;\n      }\n    case 'LOAD_CART_FROM_DB':\n      {\n        const {\n          cartItems\n        } = action.payload;\n        const totalPrice = cartItems.reduce((acc, item) => acc + item.total_item_price, 0);\n        const taxes = totalPrice * 0.18;\n        const grandTotal = totalPrice + taxes + state.deliverCharges;\n        const updatedState = {\n          ...state,\n          cartItems,\n          cartCounter: cartItems.length,\n          totalPrice,\n          taxes,\n          grandTotal\n        };\n        localStorage.setItem('cartState', JSON.stringify(updatedState));\n        return updatedState;\n      }\n    case 'CLEAR_CART':\n      {\n        localStorage.removeItem('cartState');\n        return {\n          ...state,\n          cartItems: [],\n          cartCounter: 0,\n          totalPrice: 0,\n          taxes: 0,\n          grandTotal: 0\n        };\n      }\n    default:\n      return state;\n  }\n};\nexport default cartReducer;","map":{"version":3,"names":["savedCartState","JSON","parse","localStorage","getItem","initialState","cartItems","cartCounter","totalPrice","taxes","deliverCharges","grandTotal","cartReducer","state","action","type","existIndex","findIndex","item","id","payload","updatedState","updatedCartItems","map","index","newQuantity","quantity","total_item_price","price","reduce","acc","setItem","stringify","newQty","newTotalPrice","newTaxes","newGrandTotal","length","removeItem"],"sources":["D:/Sachin/Project/E-Commerce Project/frontend/src/reducers/cartReducer.js"],"sourcesContent":["const savedCartState = JSON.parse(localStorage.getItem('cartState'));\r\n\r\nconst initialState = savedCartState || {\r\n  cartItems: [],\r\n  cartCounter: 0,\r\n  totalPrice: 0,\r\n  taxes: 0,\r\n  deliverCharges: 50,\r\n  grandTotal: 0,\r\n};\r\n\r\nconst cartReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'ADD_TO_CART': {\r\n      const existIndex = state.cartItems.findIndex(item => item.id === action.payload.id);\r\n    \r\n      let updatedState;\r\n    \r\n      if (existIndex !== -1) {\r\n        const updatedCartItems = state.cartItems.map((item, index) => {\r\n          if (index === existIndex) {\r\n            const newQuantity = item.quantity + 1;\r\n            return {\r\n              ...item,\r\n              quantity: newQuantity,\r\n              total_item_price: newQuantity * item.price,\r\n            };\r\n          }\r\n          return item;\r\n        });\r\n    \r\n        updatedState = {\r\n          ...state,\r\n          cartItems: updatedCartItems,\r\n          cartCounter: state.cartCounter + 1,\r\n          totalPrice: updatedCartItems.reduce((acc, item) => acc + item.total_item_price, 0),\r\n          taxes: updatedState.totalPrice * 0.18,\r\n          grandTotal: updatedState.totalPrice + updatedState.taxes + state.deliverCharges,\r\n        };\r\n      } else {\r\n        updatedState = {\r\n          ...state,\r\n          cartItems: [\r\n            ...state.cartItems,\r\n            { ...action.payload, quantity: 1, total_item_price: action.payload.price },\r\n          ],\r\n          cartCounter: state.cartCounter + 1,\r\n          totalPrice: state.totalPrice + action.payload.price,\r\n          taxes: (state.totalPrice + action.payload.price) * 0.18,\r\n          grandTotal: (state.totalPrice + action.payload.price) + state.taxes + state.deliverCharges,\r\n        };\r\n      }\r\n    \r\n      localStorage.setItem('cartState', JSON.stringify(updatedState));\r\n      return updatedState;\r\n    }\r\n    \r\n\r\n    case 'INCREMENT_CART_COUNTER': {\r\n      const updatedCartItems = state.cartItems.map(item => {\r\n        if (item.id === action.payload) {\r\n          const newQty = item.quantity + 1;\r\n          return {\r\n            ...item,\r\n            quantity: newQty,\r\n            total_item_price: newQty * item.price,\r\n          };\r\n        }\r\n        return item;\r\n      });\r\n\r\n      const newTotalPrice = updatedCartItems.reduce((acc, item) => acc + item.total_item_price, 0);\r\n      const newTaxes = newTotalPrice * 0.18;\r\n      const newGrandTotal = newTotalPrice + newTaxes + state.deliverCharges;\r\n\r\n      const updatedState = {\r\n        ...state,\r\n        cartItems: updatedCartItems,\r\n        totalPrice: newTotalPrice,\r\n        taxes: newTaxes,\r\n        grandTotal: newGrandTotal,\r\n      };\r\n\r\n      localStorage.setItem('cartState', JSON.stringify(updatedState));\r\n      return updatedState;\r\n    }\r\n\r\n    case 'DECREMENT_CART_COUNTER': {\r\n      const updatedCartItems = state.cartItems.map(item => {\r\n        if (item.id === action.payload && item.quantity > 1) {\r\n          const newQty = item.quantity - 1;\r\n          return {\r\n            ...item,\r\n            quantity: newQty,\r\n            total_item_price: newQty * item.price,\r\n          };\r\n        }\r\n        return item;\r\n      });\r\n\r\n      const newTotalPrice = updatedCartItems.reduce((acc, item) => acc + item.total_item_price, 0);\r\n      const newTaxes = newTotalPrice * 0.18;\r\n      const newGrandTotal = newTotalPrice + newTaxes + state.deliverCharges;\r\n\r\n      const updatedState = {\r\n        ...state,\r\n        cartItems: updatedCartItems,\r\n        totalPrice: newTotalPrice,\r\n        taxes: newTaxes,\r\n        grandTotal: newGrandTotal,\r\n      };\r\n\r\n      localStorage.setItem('cartState', JSON.stringify(updatedState));\r\n      return updatedState;\r\n    }\r\n\r\n    case 'LOAD_CART_FROM_DB': {\r\n      const { cartItems } = action.payload;\r\n      const totalPrice = cartItems.reduce((acc, item) => acc + item.total_item_price, 0);\r\n      const taxes = totalPrice * 0.18;\r\n      const grandTotal = totalPrice + taxes + state.deliverCharges;\r\n\r\n      const updatedState = {\r\n        ...state,\r\n        cartItems,\r\n        cartCounter: cartItems.length,\r\n        totalPrice,\r\n        taxes,\r\n        grandTotal,\r\n      };\r\n\r\n      localStorage.setItem('cartState', JSON.stringify(updatedState));\r\n      return updatedState;\r\n    }\r\n\r\n    case 'CLEAR_CART': {\r\n      localStorage.removeItem('cartState');\r\n      return {\r\n        ...state,\r\n        cartItems: [],\r\n        cartCounter: 0,\r\n        totalPrice: 0,\r\n        taxes: 0,\r\n        grandTotal: 0,\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default cartReducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}