{"ast":null,"code":"import axios from \"axios\";\n\n// ==== Action Creators ====\n\n// Save the user's cart to backend\nexport const saveUserCart = () => async (dispatch, getState) => {\n  const {\n    cart: {\n      cartItems\n    },\n    userLogin: {\n      userInfo\n    }\n  } = getState();\n  if (!userInfo) return;\n  try {\n    await axios.post(\"/api/cart/save\", {\n      cartItems\n    }, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n  } catch (error) {\n    console.error(\"Error saving cart to backend:\", error);\n  }\n};\n\n// Load the user's cart from backend\nexport const loadUserCart = () => async (dispatch, getState) => {\n  const {\n    userLogin: {\n      userInfo\n    }\n  } = getState();\n  if (!userInfo) return;\n  try {\n    const {\n      data\n    } = await axios.get(\"/api/cart\", {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    if (data !== null && data !== void 0 && data.cartItems) {\n      dispatch({\n        type: 'LOAD_CART_FROM_DB',\n        payload: data.cartItems\n      });\n    }\n  } catch (error) {\n    console.error(\"Error loading cart from backend:\", error);\n  }\n};\n\n// ==== Cart Manipulation Actions ====\n\n// Add item to cart\n\n// Add item to cart\nexport const addToCart = item => async dispatch => {\n  dispatch({\n    type: 'ADD_TO_CART',\n    payload: item\n  });\n  dispatch(saveUserCart()); // Save updated cart\n};\n\n// Remove item from cart\nexport const removeFromCart = item => async dispatch => {\n  dispatch({\n    type: 'REMOVE_FROM_CART',\n    payload: item\n  });\n  dispatch(saveUserCart()); // Save updated cart\n};\n\n// Increment item quantity\nexport const incrementCartCounter = id => async dispatch => {\n  dispatch({\n    type: 'INCREMENT_CART_COUNTER',\n    payload: id\n  });\n  dispatch(saveUserCart()); // Save updated cart\n};\n\n// Decrement item quantity\nexport const decrementCartCounter = id => async dispatch => {\n  dispatch({\n    type: 'DECREMENT_CART_COUNTER',\n    payload: id\n  });\n  dispatch(saveUserCart()); // Save updated cart\n};\n\n// Clear the cart both locally and in the backend\nexport const clearCart = () => async (dispatch, getState) => {\n  const {\n    userLogin: {\n      userInfo\n    }\n  } = getState();\n\n  // If the user is logged in, clear the cart from the backend\n  if (userInfo) {\n    try {\n      await axios.post(\"/api/cart/clear\", {}, {\n        headers: {\n          Authorization: `Bearer ${userInfo.token}`\n        }\n      });\n    } catch (error) {\n      console.error(\"Error clearing cart in the backend:\", error);\n    }\n  }\n\n  // Dispatch action to clear cart in the Redux store\n  dispatch({\n    type: 'CLEAR_CART'\n  });\n};","map":{"version":3,"names":["axios","saveUserCart","dispatch","getState","cart","cartItems","userLogin","userInfo","post","headers","Authorization","token","error","console","loadUserCart","data","get","type","payload","addToCart","item","removeFromCart","incrementCartCounter","id","decrementCartCounter","clearCart"],"sources":["D:/Sachin/Project/E-Commerce Project/frontend/src/actions/cartActions.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n// ==== Action Creators ====\r\n\r\n// Save the user's cart to backend\r\nexport const saveUserCart = () => async (dispatch, getState) => {\r\n  const { cart: { cartItems }, userLogin: { userInfo } } = getState();\r\n\r\n  if (!userInfo) return;\r\n\r\n  try {\r\n    await axios.post(\"/api/cart/save\", { cartItems }, {\r\n      headers: { Authorization: `Bearer ${userInfo.token}` },\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error saving cart to backend:\", error);\r\n  }\r\n};\r\n\r\n// Load the user's cart from backend\r\nexport const loadUserCart = () => async (dispatch, getState) => {\r\n  const { userLogin: { userInfo } } = getState();\r\n\r\n  if (!userInfo) return;\r\n\r\n  try {\r\n    const { data } = await axios.get(\"/api/cart\", {\r\n      headers: { Authorization: `Bearer ${userInfo.token}` },\r\n    });\r\n\r\n    if (data?.cartItems) {\r\n      dispatch({\r\n        type: 'LOAD_CART_FROM_DB',\r\n        payload: data.cartItems,\r\n      });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error loading cart from backend:\", error);\r\n  }\r\n};\r\n\r\n\r\n// ==== Cart Manipulation Actions ====\r\n\r\n\r\n// Add item to cart\r\n\r\n// Add item to cart\r\nexport const addToCart = (item) => async (dispatch) => {\r\n  dispatch({ type: 'ADD_TO_CART', payload: item });\r\n  dispatch(saveUserCart()); // Save updated cart\r\n};\r\n\r\n\r\n// Remove item from cart\r\nexport const removeFromCart = (item) => async (dispatch) => {\r\n  dispatch({ type: 'REMOVE_FROM_CART', payload: item });\r\n  dispatch(saveUserCart()); // Save updated cart\r\n};\r\n\r\n// Increment item quantity\r\nexport const incrementCartCounter = (id) => async (dispatch) => {\r\n  dispatch({ type: 'INCREMENT_CART_COUNTER', payload: id });\r\n  dispatch(saveUserCart()); // Save updated cart\r\n};\r\n\r\n// Decrement item quantity\r\nexport const decrementCartCounter = (id) => async (dispatch) => {\r\n  dispatch({ type: 'DECREMENT_CART_COUNTER', payload: id });\r\n  dispatch(saveUserCart()); // Save updated cart\r\n};\r\n\r\n\r\n// Clear the cart both locally and in the backend\r\nexport const clearCart = () => async (dispatch, getState) => {\r\n  const { userLogin: { userInfo } } = getState();\r\n\r\n  // If the user is logged in, clear the cart from the backend\r\n  if (userInfo) {\r\n    try {\r\n      await axios.post(\"/api/cart/clear\", {}, {\r\n        headers: { Authorization: `Bearer ${userInfo.token}` },\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error clearing cart in the backend:\", error);\r\n    }\r\n  }\r\n\r\n  // Dispatch action to clear cart in the Redux store\r\n  dispatch({ type: 'CLEAR_CART' });\r\n};\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}