{"ast":null,"code":"import axios from \"axios\";\n// ==\n\n// Add to cart action\nexport const addToCart = item => async (dispatch, getState) => {\n  dispatch({\n    type: 'ADD_TO_CART',\n    payload: item\n  });\n\n  // Save the cart after adding an item\n  const {\n    cart: {\n      cartItems\n    }\n  } = getState();\n  dispatch(saveUserCart({\n    cartItems\n  }));\n};\n\n// Remove from cart action\nexport const removeFromCart = item => async (dispatch, getState) => {\n  dispatch({\n    type: 'REMOVE_FROM_CART',\n    payload: item\n  });\n\n  // Save the cart after removing an item\n  const {\n    cart: {\n      cartItems\n    }\n  } = getState();\n  dispatch(saveUserCart({\n    cartItems\n  }));\n};\n\n// Increment cart item counter action\nexport const incrementCartCounter = id => async (dispatch, getState) => {\n  dispatch({\n    type: 'INCREMENT_CART_COUNTER',\n    payload: id\n  });\n\n  // Save the cart after incrementing item count\n  const {\n    cart: {\n      cartItems\n    }\n  } = getState();\n  dispatch(saveUserCart({\n    cartItems\n  }));\n};\n\n// Decrement cart item counter action\nexport const decrementCartCounter = id => async (dispatch, getState) => {\n  dispatch({\n    type: 'DECREMENT_CART_COUNTER',\n    payload: id\n  });\n\n  // Save the cart after decrementing item count\n  const {\n    cart: {\n      cartItems\n    }\n  } = getState();\n  dispatch(saveUserCart({\n    cartItems\n  }));\n};\n\n// ===\n\nexport const saveUserCart = cartState => async (dispatch, getState) => {\n  const {\n    userLogin: {\n      userInfo\n    }\n  } = getState();\n  if (!userInfo) return;\n  try {\n    await axios.post(\"/api/cart/save\", cartState, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n  } catch (err) {\n    console.error(\"Cart save error\", err);\n  }\n};\nexport const loadUserCart = () => async (dispatch, getState) => {\n  const {\n    userLogin: {\n      userInfo\n    }\n  } = getState();\n  if (!userInfo) return;\n  try {\n    const {\n      data\n    } = await axios.get(\"/api/cart\", {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    if (data) {\n      dispatch({\n        type: 'LOAD_CART_FROM_DB',\n        payload: data\n      });\n      // localStorage.setItem('cartState', JSON.stringify(data)); // ✅ now here\n    }\n  } catch (err) {\n    console.error(\"Cart load error\", err);\n  }\n};","map":{"version":3,"names":["axios","addToCart","item","dispatch","getState","type","payload","cart","cartItems","saveUserCart","removeFromCart","incrementCartCounter","id","decrementCartCounter","cartState","userLogin","userInfo","post","headers","Authorization","token","err","console","error","loadUserCart","data","get"],"sources":["D:/Sachin/Project/E-Commerce Project/frontend/src/actions/cartActions.js"],"sourcesContent":["import axios from \"axios\";\r\n// ==\r\n\r\n// Add to cart action\r\nexport const addToCart = (item) => async (dispatch, getState) => {\r\n  dispatch({\r\n    type: 'ADD_TO_CART',\r\n    payload: item\r\n  });\r\n\r\n  // Save the cart after adding an item\r\n  const { cart: { cartItems } } = getState();\r\n  dispatch(saveUserCart({ cartItems }));\r\n};\r\n\r\n// Remove from cart action\r\nexport const removeFromCart = (item) => async (dispatch, getState) => {\r\n  dispatch({\r\n    type: 'REMOVE_FROM_CART',\r\n    payload: item\r\n  });\r\n\r\n  // Save the cart after removing an item\r\n  const { cart: { cartItems } } = getState();\r\n  dispatch(saveUserCart({ cartItems }));\r\n};\r\n\r\n// Increment cart item counter action\r\nexport const incrementCartCounter = (id) => async (dispatch, getState) => {\r\n  dispatch({\r\n    type: 'INCREMENT_CART_COUNTER',\r\n    payload: id\r\n  });\r\n\r\n  // Save the cart after incrementing item count\r\n  const { cart: { cartItems } } = getState();\r\n  dispatch(saveUserCart({ cartItems }));\r\n};\r\n\r\n// Decrement cart item counter action\r\nexport const decrementCartCounter = (id) => async (dispatch, getState) => {\r\n  dispatch({\r\n    type: 'DECREMENT_CART_COUNTER',\r\n    payload: id\r\n  });\r\n\r\n  // Save the cart after decrementing item count\r\n  const { cart: { cartItems } } = getState();\r\n  dispatch(saveUserCart({ cartItems }));\r\n};\r\n\r\n\r\n// ===\r\n\r\n\r\n\r\nexport const saveUserCart = (cartState) => async (dispatch, getState) => {\r\n  const { userLogin: { userInfo } } = getState();\r\n\r\n  if (!userInfo) return;\r\n\r\n  try {\r\n    await axios.post(\"/api/cart/save\", cartState, {\r\n      headers: { Authorization: `Bearer ${userInfo.token}` }\r\n    });\r\n  } catch (err) {\r\n    console.error(\"Cart save error\", err);\r\n  }\r\n};\r\n\r\nexport const loadUserCart = () => async (dispatch, getState) => {\r\n    const { userLogin: { userInfo } } = getState();\r\n  \r\n    if (!userInfo) return; \r\n    \r\n    try {\r\n      const { data } = await axios.get(\"/api/cart\", {\r\n        headers: { Authorization: `Bearer ${userInfo.token}` }\r\n      });\r\n  \r\n      if (data) {\r\n        dispatch({ type: 'LOAD_CART_FROM_DB', payload: data });\r\n        // localStorage.setItem('cartState', JSON.stringify(data)); // ✅ now here\r\n      }\r\n      \r\n    } catch (err) {\r\n      console.error(\"Cart load error\", err);\r\n    }\r\n  };\r\n\r\n  \r\n  \r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}